# 使用手册（User Manual）

## 前言

生成器结构简单使用python os库和shutil库来完成。支持简单的文件或者文件夹的增删，设计初衷主要是为了方便起C/C++工程，特别是嵌入式领域库的种类繁多，文件复杂，只有ARM系列部分的产品有官方的生成器，导致其他芯片特别是国产的芯片的工程创建比较复杂，手动的创建文件夹和工程项目比较复杂，在开发库的时候一个个拉文件也比较痛苦。这脚本可以通过几个简单的指令来完成复杂的创建，目前仅支持windows。当然这个脚本比不上Cmake和makefile这些成熟的产品的。也没有替代这些东西的想法，但是C语言的许多工具都没有在创建工程方面做的很好，加之没用包管理所以有时候开发需要拉很长时间的依赖。虽然主流的方式是准备模板工程，但是我觉的还是有一个工具来解决这个问题更好。

## 指令列表

- yl：这个指令还在制作当作，暂时没有想好如何设计，他的功能是直接解析programMakeFile--自定义的一种描述工程结构的文件，来完成工程的自动配置，指令名字就是依赖的拼音。
- crt：Create的缩写，用于创建文件和文件夹。
- cd：不用说了吧懂得都懂，打开一个文件夹。
- cpy：copy的缩写，用来复制文件或者文件夹到指定的目录，功能类似yl，但是他们的区别是，yl只能使用文件来自动创建，cpy是在控制台以指令的形式创建的。
- del：删除文件或者文件夹。
- help：获取帮助的指令，暂时没有做。
- q or Q：唯一一个不区分大小写的指令，用于退出程序。

## 语法

### 指令：yl（待完善）

### 指令：crt

crt指令可以创建文件和文件夹，对于文件夹一次仅支持单个文件夹，文件可以在一条指令内创建多个，在创建文件时路径可以缺省，但是需要使用`"-f"`来表明创建的是文件，此时创建的文件将目前打开的路径作为默认路径使用。在创建扩展名相同的文件时可以使用`"*extension"`来表明后面文件的扩展名，以此来省略重复的敲扩展名工作。在创建文件时如果使用未创建的路径作为目标，会自动为你创建目录。在创建目录时如果不使用绝对路径会自动在打开的目录下创建。例子如下：

- 不缺省路径创建文件：

	```
	crt D:\Program\Core\Src -f main.c			//单文件 -f可省略
	crt D:\Program\Core\Src main.c
	crt D:\Program\Core\Src -f main.c gpio.c adc.c		//多文件 -f可省略
	crt D:\Program\Core\Src main.c gpio.c adc.c
	```

- 缺省路径创建文件：

	```
	crt -f main.c				//-f 不可省略
	crt -f main.c gpio.c adc.c  		//-f 不可省略
	```

- 缺省扩展名创建：

	```
	crt D:\Program\Core\Src *c main gpio adc
	crt D:\Program\Core\Src *c main
	```

- 创建文件夹：

	```
	//虽然crt指令可以不使用绝对路径创建文件夹，但是不建议，因为这个功能有潜在的BUG没有测试，这个功能纯粹是意外
	crt D:\Program\Core\Inc
	crt core					//此处假定Program已经创建并打开。
	```

> [!NOTE]
>
> 需要注意的是，如果脚本运行时没有任何文件夹打开，系统缺失目录，在第一次创建文件夹的时候一定要使用绝对路径，有一个很方便的功能是，在缺省目录的情况下，第一个被创建的目录会被自动打开。

在开启脚本的时候可以注意一下，提示，控制台界面会显示当前打开的目录：

```//
>>  >> crt D:\Program			//开始为空
>> D:\Program >>			//创建之后自动打开，并在两个">>"之间显示
```

crt指令对C工程进行了特化，会自动检测你的文件后缀名，当然这个功能的检测没有做的特别好，除了特殊的文件名"main.c"外，其他的文件仅在使用缺省文件名创建时检测其后缀。

如果检测到了.h文件，会自动写入头文件保护等内容：

```c
#ifndef __TEST_H__
#define __TEST_H__

#ifdef __cplusplus
extern "C"{
#endif

#ifdef __cplusplus
}
#endif
#endif /* __TEST_H__ */
```

如果检测到了.c文件会自动为其写入同名.h文件的`#include`，但是如果检测到main.c会自动为您创建模板，并询问您需要加入的库文件，自动加入`#include`。

```c
crt D:\Program\Core\Src main.c //也可以使用缺省方式 *c main 最好使用缺省方式
检测到main.c文件，是否需要个性化生成[Y/N] Y
输入库文件:输入库文件:<stdio.h> <string.h> "main.h"

//输出
#include <stdio.h>
#include <string.h>
#include "main.h"

int main()
{
	return 0;
}

```

如果你选择了N则生成空白文件不做任何处理。

### 指令：cd

这个真没啥好说的cd + 路径就行了，只能作用于文件夹。

```
>>  >>cd D:\Program
//如果有这个文件夹
open >> D:\Program
>> D:\Program >> 
//如果没有这个文件夹
E:path error or Folder not found
```

### 指令：cpy

这个指令真心不好设计，怎么搞都感觉不好使，最后妥协成这样。

以下是一个基本用例：

```
cpy D:\Program D:\xxLib\Core|Device D:\xxLib\Core\Src\xx.c|xx.h D:\xxLib\Core\Inc D:\xxLib\readme.md
```

这个用例表明了所有可以使用的cpy格式使用"|"符号来连接同级目录或者文件。虽然文件夹和文件都可以复制，但是需要注意的是使用"|"来连接一个目录下的多个文件或者文件夹，必须保证不混合文件和文件夹，例如以下的做法是不行的，可能导致意外的错误：

```
cpy D:\Program D:\xxLib\Core|xx.h
```

这种方式是禁止的，虽然看着很方便，但是我的代码没做这样的处理，大概率会报错，主要是因为复制文件和复制整个文件树需要使用的API不一样。目前结构比较死板，以后那天心情好重构再支持混合。

### 指令：del

这指令和cd一样，指令名+路径就行了，最好使用绝对路径，相对路径可能导致意外的问题。

用例：

```
del D:\Program			//删除目录
del D:\Program\main.c		//删除文件
```

### 指令：help（待完善）

这指令目前只做了简单的提示，没有完全做完，主要是整个程序没有完成，再加上我有重构的想法。

但是语法还是有的直接敲help就能看到用法。

